image:
  repository: weyerdataengineering.azurecr.io/aiteza-backend
  tag: ""
  pullPolicy: Always

imagePullSecrets: []
nameOverride: ""
fullNameOverride: aiteza-backend

javaOptions: ""
timezone: "Europe/Berlin"

aiteza:
  files:
    chatFileExpirationDays: 7
    cleanupSchedule: "0 0 2 * * *"
    cleanupBatchSize: 10
  audit:
    enabled: true
    lokiUrl: ""
    jobLabel: aiteza-audit
    connectionTimeout: 5000
    readTimeout: 5000
    secretRef:
      name: ""
      keys:
        username: "username"
        password: "password"
  litellm:
    url: ""
  security:
    publicPaths:
      - "/v3/api-docs/**"
      - "/doc/**"
      - "/actuator/**"
      - "/v1/**"
      - "/api/**"
    frontendOrigin: ""
  hallucinationDetectionModel: ""
  chatNameModel: ""
  repromptModel: ""
  imageDescriptionModel: ""
  search:
    reranking:
      enabled: false
      endpoint: ""
      model: ""
      secretRef:
        name: ""
        keys:
          apiKey: "apiKey"
    fullTextWeight: 0.7
  models:
    health:
      timeoutSeconds: 20
  database:
    connectionPool:
      minIdle: 5
      max: 90
      idleTimeout: 5000
    postgres:
      host: ""
      port: 5432
      database: aiteza
      schema: public
      secretRef:
        name: ""
        keys:
          postgresUser: "postgresUser"
          postgresPassword: "postgresPassword"
  keycloak:
    authServerUrl: ""
    realm: ""
    frontendClientId: ""
    backendClientId: ""
    n8nClientId: ""
    secretRef:
      name: ""
      keys:
        adminUsername: "adminUsername"
        adminPassword: "adminPassword"
        backendClientSecret: ""
        n8nClientSecret: ""
  etl:
    tika:
      endpoint: ""
    docling:
      enabled: true
      baseUrl: ""
      convertEndpoint: "/v1/convert/file"
      convertAsyncEndpoint: "/v1/convert/source/async"
      resultEndpoint: "/v1/result"
      statusEndpoint: "/v1/status/poll"
      maxPollingAttempts: 2160
      pollingIntervalInSeconds: 10
      doOcr: true
      forceOcr: false
      ocrEngine: "easyocr"
      pdfBackend: "dlparse_v4"
      tableMode: "accurate"
      imageExportMode: "placeholder"
      abortOnError: false
      returnAsFile: false
      doTableStructure: true
      includeImages: true
      imagesScale: 2
      doCodeEnrichment: false
      doFormulaEnrichment: false
      doPictureClassification: false
      doPictureDescription: false
      fromFormats:
        - docx
        - pptx
        - html
        - image
        - pdf
        - md
        - csv
        - xlsx
        - audio
      vlmPipelineOptions:
        headers: {}
        params: {}
        responseFormat: "markdown"
        concurrency: 4
        timeout: 240
        scale: "2.0"
        temperature: "0.4"
    firecrawl:
      endpoint: "https://api.firecrawl.dev"
      maxSubpages: 200
      maxDepth: 3
      secretRef:
        name: ""
        keys:
          apiKey: "apiKey"
      search:
        numResults: 5
        timeoutInSeconds: 90

s3:
  enabled: false
  endpoint: ""
  region: ""
  bucketName: ""
  secretRef:
    name: ""
    keys:
      accessKey: "accessKey"
      secretKey: "secretKey"

spring:
  codec:
    maxInMemorySize: "500KB"
  servlet:
    multipart:
      maxFileSize: "400MB"
      maxRequestSize: "400MB"
  security:
    oauth2:
      resourceserver:
        jwt:
          issuerUri: ""
          audiences: "account"
  ai:
    openai:
      baseUrl: ""
      embedding:
        embeddingsPath: "/v1/embeddings"
        secretRef:
          name: ""
          keys:
            apiKey: "apiKey"
        options:
          dimensions: 768
          model: "nomic-embed-text:v1.5"
          temperature: 0.2

server:
  compression:
    enabled: true
    mimeTypes: "text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json"
  tomcat:
    maxSwallowSize: "100MB"

springdoc:
  swaggerUi:
    path: /doc/swagger-ui.html
    disableSwaggerDefaultUrl: true
    operationsSorter: alpha
    tagsSorter: alpha
    tryItOutEnabled: true
    oauth:
      clientId: ""

# A list of Kubernetes Secret objects that will be exported to the ATIEZA
#  pod as environment variables.
environmentSecrets: []
  # - aiteza-envsecrets

service:
  annotations: {}
  type: ClusterIP
  clusterIP:
  httpPort: 80
  sessionAffinity: None

ingress:
  enabled: true
  ingressClassName: ""
  annotations: {}
  host: ""
  tls:
    secretName: ""

serviceAccount:
  create: false

replicaCount: 2

resources:
  requests:
    memory: 2Gi
    cpu: 1
  limits:
    memory: 4Gi
    cpu: 2

podAnnotations: {}

podSecurityContext: {}
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
    - ALL
  seccompProfile:
    type: RuntimeDefault

terminationGracePeriodSeconds: 30

nodeSelector: {}
tolerations: []
affinity: {}
topologySpreadConstraints: []

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 60

podDisruptionBudget:
  enabled: true
  minAvailable: "50%"
